# Методы API vk.com
Здесь будет список всех методов API, которыми я пользовалась или буду пользоваться (возможно).

## Информация о сообществе
https://vk.com/dev/groups.getById

_Как работает:_ принимает `groupids` (_не более 500_, можно использовать как короткие имена `domain`, так и `owner_id`), по ним выгружает информацию о нём:
* members_count,
* (что-то ещё, о чём я, наверное, пока не подумала)


## Записи сообщества
https://vk.com/dev/wall.get

_Как работает:_ принимает `domain` или `owner_id` и количество записей, возвращает JSON с контентом этих самых записей.

__Проблема:__ API не даёт выгружать больше 100 последних записей, поэтому код нужно регулярно перезапускать, например, в cron. Нужно подумать, можно ли каким-то образом скачать всё, а если нет, то просто скачать давние записи.

Что скачивает код:
* id записи,
* её текст,
* `owner_id` сообщества, чтобы в дальшейшем можно было скачивать комментарии к записям (см. ниже).

Дополнительно сохраняется JSON последних 100 записей.

## Комментарии к записям
https://vk.com/dev/wall.getComments

_Как работает:_ принимает `owner_id` сообщества и `post_id` записи, возвращает комментарии и `from_id` пользователя, который их оставил (потом надо выгрузить социолингвистические данные).

__Потенциальная проблема:__ к сообществам проще обращаться по короткому адресу (`domain`), а не по id (`owner_id`); сейчас owner_id просто выгружается из записей по domain, но вообще-то можно, наверное, подумать про то, как сделать это нормально.

Какие данные из записей используются:
* owner_id,
* id записи

Какие данные выгружаются:
* id комментария,
* время, когда он был оставлен,
* текст,
* id пользователя, его оставившего,
* его социолингвистические данные (см. ниже)

## Информация об аккаунте
https://vk.com/dev/users.get

_Как работает:_ принимает `user_ids` (_не более 1000_) и поля, необходимые для обработки, возвращает JSON с информацией о пользователе, оставившем комментарий.

Выгружаемая информация:
* пол `sex`,
* возраст `bdate`,
* страна проживания `country`,
* город проживания `city`,
* (что-то ещё?)
* есть такая прикольная фича, `personal[langs]` — языки, на которых говорит пользователь, мб пригодится?

__Потенциальная проблема:__ формат bdate может не дать возраста, если скрыт год рождения.
